<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Friendly date ranges</title>
  </head>
  <body>
<script>
/* - Les mois en toutes lettres (VAR)
- le jour en format "1st/21st/31st 2nd 3rd 4-30th" (VAR)
- si la période < 1 an, ne pas afficher l'année
- si la période > 1 an, afficher l'année
- si la période < 1 mois, ne pas afficher le mois dans la ending date.

Use of split(): String into array.
Use of substr(): 'abcdefghij'.substr(1,2) gives 'bc'
parseInt() : transform a string into integer
 */

function makeFriendlyDates(arr) {
  var arrConverted = [];
  //fct that converts the arr in argument into an arr of Intergers
  function arrToArr(arr) {
    //var arr = ["2016-07-01", "2016-07-04"]; //need to convert into the format: [[20160701], [20160704]]
    var from = [];//from + to will be arrConverted
    var to = [];
    var start = arr[0].split("-");
    var end = arr[1].split("-");

    //Use of parseInt & loop so we can compare the values later with an array of numbers
    for (var i = 0; i < start.length; i++) {
      from.push(start[i]);
    }
    for (var j = 0; j < end.length; j++) {
      to.push(end[j]);
    }
    from = from.join("");
    to = to.join("");
    arrConverted.push(parseInt(from));
    arrConverted.push(parseInt(to));
  }

  arrToArr(arr);
  console.log(arrConverted); //[[20160701], [20160704]] 2 comparable integers

  //declaring functions to separate years from months from days + give the most complete structure to the to and from final array.
  //those full structures will then be sliced and joined further
  function fromNumberToText(from, to) {
    var monthsArr = ["trash","January", "February", "March","April", "May", "June", "July", "August","September","October","November","December"];
    var ordinDays = ["trash","st","nd","rd","th"];
    var fromArray = [];
    var toArray = [];

    function fromInLetters(from) {

      var fromYear = (JSON.stringify(from)).substr(0,4);
      var fromMonth = (JSON.stringify(from)).substr(4,2);
      var fromDay = (JSON.stringify(from)).substr(6,2);

      fromArray.push(monthsArr[parseInt(fromMonth)]);
      //to add "st, nd, rd or th to the day"
      if (parseInt(fromDay) <= 3) {
        fromArray.push(parseInt(fromDay) + ordinDays[parseInt(fromDay)] + ",");
      } else {
        fromArray.push(parseInt(fromDay) + ordinDays[4] + ",");
      }

      fromArray.push(fromYear);
      return fromArray;

    }

    function toInLetters(to) {
      var toYear = (JSON.stringify(to)).substr(0,4);
      var toMonth = (JSON.stringify(to)).substr(4,2);
      var toDay = (JSON.stringify(to)).substr(6,2);

      toArray.push(monthsArr[parseInt(toMonth)]);
      //to add "st, nd, rd or th to the day"
      if (parseInt(toDay) <= 3) {
        toArray.push(parseInt(toDay) + ordinDays[parseInt(toDay)] + ",");
      } else {
        toArray.push(parseInt(toDay) + ordinDays[4] + ",");
      }

      toArray.push(toYear);
      return toArray;
    }
  //  fromInLetters(from);
  //  toInLetters(to);
    return [fromInLetters(from),toInLetters(to)];




  }


  //start applying differents logics comparying the numbers from the 2 initial strings and running the fct fromNumberToText for right format
  //1: If period < 1 month
  var from = arrConverted[0];
  var to = arrConverted[1];
  var currentYear = "2016";


  if (to - from >= 10000) {//more than a year
    var finalArr = [];
    console.log("'Month xth, year' , 'Month xth, year'");
    var TwoDarr = fromNumberToText(from, to);
    console.log(TwoDarr);//[["month","day","year"]["month","day","year"]]
    finalArr.push(TwoDarr[0].join(" "));
    finalArr.push(TwoDarr[1].join(" "));
    console.log(finalArr);
    return fianlArr;

  } else if (to - from < 10000) { //less than a year

     if (from === to) { //if same date (exception)
      console.log("Month xth, year");
      fromNumberToText(from, to);

    } else if ((JSON.stringify(from)).substr(0,4) === currentYear) {

            if ((JSON.stringify(to)).substr(4,2) === (JSON.stringify(from)).substr(4,2)) {
              console.log("'Month xth' , 'xth'");
              fromNumberToText(from, to);
            } else {
              console.log("'Month xth' , 'Month xth'");
              fromNumberToText(from, to);
            }

      } else {
        console.log("'Month xth, year' , 'Month xth'"); //just less than a year
        fromNumberToText(from, to);
      }
  }



// create a global array and push the 2 final strings to it before returning it:
  //CODE HERE ....




}
/*
makeFriendlyDates(["2016-07-01", "2016-07-04"]);// ["July 1st","4th"].
makeFriendlyDates(["2016-12-01", "2017-02-03"]);// ["December 1st","February 3rd"].
makeFriendlyDates(["2016-12-01", "2018-02-03"]);// ["December 1st, 2016","February 3rd, 2018"].
*/
//makeFriendlyDates(["2017-03-01", "2017-05-05"]);// ["March 1st, 2017","May 5th"]
//makeFriendlyDates(["2018-01-13", "2018-01-13"]);// ["January 13th, 2018"].
//makeFriendlyDates(["2022-09-05", "2023-09-04"]);// ["September 5th, 2022","September 4th"].
makeFriendlyDates(["2022-09-05", "2023-09-05"]);// ["September 5th, 2022","September 5th, 2023"]



</script>
  </body>
</html>
